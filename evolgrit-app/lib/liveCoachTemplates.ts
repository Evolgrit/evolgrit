export type ModuleType =
  | "pfleg_aufnahme"
  | "pfleg_schmerzen"
  | "pfleg_medikamente"
  | "pfleg_vital"
  | "pfleg_hygiene"
  | "pfleg_kommunikation";

export type TemplateKey =
  | "ASK"
  | "ACK"
  | "TOO_SHORT"
  | "NO_AUDIO"
  | "REPHRASE"
  | "REMIND_GOAL"
  | "HINT_STRUCTURE"
  | "HINT_EXAMPLE_1"
  | "HINT_EXAMPLE_2"
  | "HINT_EXAMPLE_3"
  | "CLOSING";

export const UNIVERSAL_TEMPLATES: Partial<Record<TemplateKey, string[]>> = {
  NO_AUDIO: [
    "Ich habe dich noch nicht gut gehÃ¶rt ðŸ™‚ Halte das Mikro etwas lÃ¤nger und sprich klar.",
    "Da kam wenig an. Bitte sprich etwas lÃ¤nger und etwas lauter.",
  ],
  TOO_SHORT: [
    "Ich habe dich noch nicht gut verstanden ðŸ™‚ Sagâ€™s bitte in einem ganzen Satz.",
    "Sag bitte etwas lÃ¤nger, damit ich es sicher notieren kann.",
  ],
};

export const ALLOWED_KEYS: Record<ModuleType, Record<string, TemplateKey[]>> = {
  pfleg_aufnahme: {
    aufnahme_01_name_zimmer: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    aufnahme_02_problem: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    aufnahme_03_dringlichkeit: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    aufnahme_04_closing: ["CLOSING", "REPHRASE", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
  pfleg_schmerzen: {
    schmerz_01_ort: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    schmerz_02_skala: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    schmerz_03_dauer: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    schmerz_04_symptome: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    schmerz_05_closing: ["CLOSING", "REPHRASE", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
  pfleg_medikamente: {
    med_01_medikament: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    med_02_dosis: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    med_03_zeit: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    med_04_allergie: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
      "CLOSING",
    ],
    med_05_closing: ["CLOSING", "REPHRASE", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
  pfleg_vital: {
    vital_01_bp: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REPHRASE",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
    ],
    vital_02_puls: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
    ],
    vital_03_temp: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
      "HINT_EXAMPLE_3",
    ],
    vital_04_spo2: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    vital_05_einschaetzung: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    vital_06_closing: ["CLOSING", "REPHRASE", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
  pfleg_hygiene: {
    hyg_01_haende: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    hyg_02_handschuhe: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
    ],
    safety_03_sturz: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
    ],
    safety_04_lagerung: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
      "HINT_EXAMPLE_2",
    ],
    hyg_05_closing: ["CLOSING", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
  pfleg_kommunikation: {
    comm_01_empathie: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    comm_02_beruhigen: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    comm_03_grenze_setzen: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    comm_04_naechster_schritt: [
      "ASK",
      "ACK",
      "TOO_SHORT",
      "REMIND_GOAL",
      "HINT_STRUCTURE",
      "HINT_EXAMPLE_1",
    ],
    comm_05_closing: ["CLOSING", "REMIND_GOAL", "HINT_STRUCTURE", "HINT_EXAMPLE_1"],
  },
};

export const TEMPLATES: Record<
  ModuleType,
  Record<string, Partial<Record<TemplateKey, string>>>
> = {
  pfleg_aufnahme: {
    aufnahme_01_name_zimmer: {
      ASK: "Wie heiÃŸt der Patient und in welchem Zimmer ist er?",
      ACK: "Danke. Ich habe notiert: {patientTitle}{patientName}, Zimmer {roomNumber}.",
      REPHRASE: "Nennen Sie bitte kurz Name und Zimmernummer. Zum Beispiel: â€žFrau MÃ¼ller, Zimmer 102.â€œ",
      REMIND_GOAL: "Kurz zum Ziel: Wir machen gerade die Aufnahme â€“ Name und Zimmer zuerst.",
      HINT_STRUCTURE: "Schema: â€ž{patientTitle}{patientName}, Zimmer {roomNumber}.â€œ",
      HINT_EXAMPLE_1: "â€žFrau MÃ¼ller, Zimmer 102.â€œ",
      HINT_EXAMPLE_2: "â€žHerr Yilmaz, Zimmer 12.â€œ",
      HINT_EXAMPLE_3: "â€žPatientin Schmidt, Zimmer 3.â€œ",
      CLOSING: "Super. Dann zum Problem in einem Satz.",
    },
    aufnahme_02_problem: {
      ASK: "Was ist das Problem? Bitte in einem Satz.",
      ACK: "Verstanden. Ich notiere: {problemShort}.",
      REPHRASE:
        "Sagen Sie bitte kurz, was los ist â€“ ein Satz reicht. Zum Beispiel: â€žStarke Kopfschmerzen seit heute Morgen.â€œ",
      REMIND_GOAL: "Wir bleiben kurz bei der Aufnahme: Was ist das Problem â€“ in einem Satz.",
      HINT_STRUCTURE: "Schema: â€ž{Symptom} seit {Zeit}.â€œ oder â€ž{Symptom}, StÃ¤rke {leicht/mittel/stark}.â€œ",
      HINT_EXAMPLE_1: "â€žStarke Bauchschmerzen seit zwei Stunden.â€œ",
      HINT_EXAMPLE_2: "â€žSchwindel und Ãœbelkeit seit heute Vormittag.â€œ",
      HINT_EXAMPLE_3: "â€žDer Patient ist gestÃ¼rzt und hat Schmerzen am Bein.â€œ",
      CLOSING: "Danke. Jetzt noch kurz: Seit wann und wie dringend ist es?",
    },
    aufnahme_03_dringlichkeit: {
      ASK: "Seit wann ist das so â€“ und wirkt es eher leicht, mittel oder stark?",
      ACK: "Okay. Ich habe notiert: {durationText}, {urgencyText}.",
      REPHRASE: "Bitte zwei Dinge: seit wann (z.B. â€žseit gesternâ€œ) und wie stark (leicht/mittel/stark).",
      REMIND_GOAL: "Kurz zum Ziel: Wir klÃ¤ren gerade die Dringlichkeit (seit wann + wie stark).",
      HINT_STRUCTURE: "Schema: â€žSeit {Zeit} und {leicht/mittel/stark}.â€œ",
      HINT_EXAMPLE_1: "â€žSeit heute Morgen und stark.â€œ",
      HINT_EXAMPLE_2: "â€žSeit zwei Tagen und mittel.â€œ",
      HINT_EXAMPLE_3: "â€žSeit einer Stunde und leicht.â€œ",
      CLOSING: "Alles klar. Ich gebe das so ans Team weiter.",
    },
    aufnahme_04_closing: {
      ASK:
        "Ich fasse kurz zusammen: {patientTitle}{patientName}, Zimmer {roomNumber}, {problemShort}, {durationText}, {urgencyText}. Stimmt das so?",
      ACK: "Perfekt, danke.",
      REPHRASE: "Kurz bestÃ¤tigt: Passt die Zusammenfassung so?",
      REMIND_GOAL: "Wir schlieÃŸen die Aufnahme kurz ab: einmal bestÃ¤tigen.",
      HINT_STRUCTURE: "Antworten Sie einfach: â€žJa, stimmt.â€œ oder â€žNein, Zimmer ist 103.â€œ",
      HINT_EXAMPLE_1: "â€žJa, stimmt so.â€œ",
      HINT_EXAMPLE_2: "â€žFast â€“ es ist Zimmer 103.â€œ",
      HINT_EXAMPLE_3: "â€žNein â€“ die Schmerzen sind stark, nicht mittel.â€œ",
      CLOSING: "Danke. Aufnahme abgeschlossen.",
    },
  },
  pfleg_schmerzen: {
    schmerz_01_ort: {
      ASK: "Wo genau tut es weh? Bitte kurz: Kopf, Bauch, RÃ¼cken oder Brust?",
      ACK: "Okay: {painLocation}.",
      REPHRASE: "Sagen Sie bitte nur den Ort: â€žKopfâ€œ, â€žBauchâ€œ, â€žRÃ¼ckenâ€œ oder â€žBrustâ€œ.",
      REMIND_GOAL: "Kurz zum Ziel: Wir klÃ¤ren gerade den Schmerzort.",
      HINT_STRUCTURE: "Antworten Sie mit einem Wort: â€ž{Ort}â€œ.",
      HINT_EXAMPLE_1: "â€žKopf.â€œ",
      HINT_EXAMPLE_2: "â€žBauch.â€œ",
      HINT_EXAMPLE_3: "â€žRÃ¼cken.â€œ",
      CLOSING: "Danke. Jetzt die StÃ¤rke von 0 bis 10.",
    },
    schmerz_02_skala: {
      ASK: "Wie stark ist der Schmerz von 0 bis 10? (0 = kein Schmerz, 10 = sehr stark)",
      ACK: "Verstanden: {painScale}/10.",
      REPHRASE: "Nennen Sie bitte nur eine Zahl zwischen 0 und 10.",
      REMIND_GOAL: "Wir bleiben kurz bei der Ãœbung: jetzt die StÃ¤rke als Zahl 0â€“10.",
      HINT_STRUCTURE: "Antworten Sie z.B.: â€ž7â€œ oder â€ž7 von 10â€œ.",
      HINT_EXAMPLE_1: "â€ž3 von 10.â€œ",
      HINT_EXAMPLE_2: "â€ž7.â€œ",
      HINT_EXAMPLE_3: "â€ž9 von 10.â€œ",
      CLOSING: "Okay. Seit wann haben Sie das?",
    },
    schmerz_03_dauer: {
      ASK: "Seit wann haben Sie die Schmerzen? (z.B. seit 2 Stunden / seit gestern)",
      ACK: "Okay: {durationText}.",
      REPHRASE: "Sagen Sie bitte eine Zeitangabe: â€žseit â€¦ Stunden/Tagenâ€œ oder â€žseit gestern/heuteâ€œ.",
      REMIND_GOAL: "Kurz zum Ziel: Wir klÃ¤ren gerade die Dauer (seit wann).",
      HINT_STRUCTURE: "Schema: â€žSeit {Zeit}.â€œ",
      HINT_EXAMPLE_1: "â€žSeit heute Morgen.â€œ",
      HINT_EXAMPLE_2: "â€žSeit zwei Stunden.â€œ",
      HINT_EXAMPLE_3: "â€žSeit gestern Abend.â€œ",
      CLOSING: "Danke. Gibt es Begleitsymptome?",
    },
    schmerz_04_symptome: {
      ASK: "Gibt es Ãœbelkeit, Schwindel oder Fieber?",
      ACK: "Alles klar, notiert.",
      REPHRASE: "Kurz: Ãœbelkeit? Schwindel? Fieber? Sie kÃ¶nnen auch â€žneinâ€œ sagen.",
      REMIND_GOAL: "Wir schlieÃŸen den Schmerz-Check ab: Begleitsymptome ja/nein.",
      HINT_STRUCTURE: "Antworten Sie: â€žJa, {Symptom}.â€œ oder â€žNein.â€œ",
      HINT_EXAMPLE_1: "â€žNein.â€œ",
      HINT_EXAMPLE_2: "â€žJa, Schwindel.â€œ",
      HINT_EXAMPLE_3: "â€žJa, Ãœbelkeit und Fieber.â€œ",
      CLOSING: "Danke. Ich fasse kurz zusammen.",
    },
    schmerz_05_closing: {
      ASK: "Zusammenfassung: {painLocation}, {painScale}/10, {durationText}. Stimmt das?",
      ACK: "Danke. Wir sind fertig.",
      REPHRASE: "Kurz bestÃ¤tigen: stimmt die Zusammenfassung?",
      REMIND_GOAL: "Letzter Schritt: einmal kurz bestÃ¤tigen.",
      HINT_STRUCTURE: "Antworten Sie: â€žJa.â€œ oder korrigieren Sie eine Sache.",
      HINT_EXAMPLE_1: "â€žJa.â€œ",
      HINT_EXAMPLE_2: "â€žFast â€“ es ist 6 von 10.â€œ",
      HINT_EXAMPLE_3: "â€žNein â€“ es ist seit gestern, nicht seit heute.â€œ",
      CLOSING: "Alles klar. Schmerz-Check abgeschlossen.",
    },
  },
  pfleg_medikamente: {
    med_01_medikament: {
      ASK: "Welche Medikamente nimmt der Patient gerade? (das wichtigste zuerst)",
      ACK: "Okay: {medName}.",
      REPHRASE: "Nennen Sie bitte den Medikamentennamen. Wenn mehrere: zuerst das wichtigste.",
      REMIND_GOAL: "Kurz zum Ziel: Wir klÃ¤ren gerade den Medikamentennamen.",
      HINT_STRUCTURE: "Antworten Sie z.B.: â€žIbuprofenâ€œ oder â€žParacetamolâ€œ.",
      HINT_EXAMPLE_1: "â€žIbuprofen.â€œ",
      HINT_EXAMPLE_2: "â€žParacetamol.â€œ",
      HINT_EXAMPLE_3: "â€žInsulin.â€œ",
      CLOSING: "Danke. Welche Dosis?",
    },
    med_02_dosis: {
      ASK: "Welche Dosis? (z.B. 400 mg oder 1 Tablette)",
      ACK: "Verstanden: {medDoseText}.",
      REPHRASE: "Sagen Sie bitte eine Dosis: mg/ml oder Anzahl Tabletten.",
      REMIND_GOAL: "Wir bleiben kurz dabei: jetzt die Dosis.",
      HINT_STRUCTURE: "Schema: â€ž{Zahl} mgâ€œ oder â€ž{Zahl} Tablette(n)â€œ.",
      HINT_EXAMPLE_1: "â€ž400 mg.â€œ",
      HINT_EXAMPLE_2: "â€ž1 Tablette.â€œ",
      HINT_EXAMPLE_3: "â€ž500 mg.â€œ",
      CLOSING: "Okay. Wann wurde es zuletzt genommen oder wann ist es fÃ¤llig?",
    },
    med_03_zeit: {
      ASK:
        "Wann wurde es zuletzt genommen â€“ und wann ist die nÃ¤chste Gabe? (Uhrzeit oder morgens/abends)",
      ACK: "Okay: {medScheduleText}.",
      REPHRASE:
        "Sagen Sie bitte kurz den Zeitpunkt, z.B. â€žum 8 Uhrâ€œ oder â€žmorgens und abendsâ€œ.",
      REMIND_GOAL: "Kurz zum Ziel: Wir klÃ¤ren gerade den Zeitplan.",
      HINT_STRUCTURE: "Schema: â€žZuletzt {Zeit}, nÃ¤chstes {Zeit}â€œ oder â€žmorgens/abendsâ€œ.",
      HINT_EXAMPLE_1: "â€žZuletzt um 8 Uhr, wieder um 16 Uhr.â€œ",
      HINT_EXAMPLE_2: "â€žMorgens und abends.â€œ",
      HINT_EXAMPLE_3: "â€žAlle 6 Stunden.â€œ",
      CLOSING: "Danke. Gibt es Allergien?",
    },
    med_04_allergie: {
      ASK: "Gibt es Allergien oder UnvertrÃ¤glichkeiten? (z.B. Penicillin)",
      ACK: "Alles klar: {allergiesText}.",
      REPHRASE: "Kurz: Allergien ja/nein. Wenn ja: welche?",
      REMIND_GOAL: "Wir schlieÃŸen ab: einmal Allergien klÃ¤ren.",
      HINT_STRUCTURE: "Antworten Sie: â€žKeineâ€œ oder â€žJa, gegen â€¦â€œ",
      HINT_EXAMPLE_1: "â€žKeine Allergien.â€œ",
      HINT_EXAMPLE_2: "â€žJa, gegen Penicillin.â€œ",
      HINT_EXAMPLE_3: "â€žJa, UnvertrÃ¤glichkeit bei Ibuprofen.â€œ",
      CLOSING: "Perfekt. Ich fasse zusammen.",
    },
    med_05_closing: {
      ASK:
        "Zusammenfassung: {medName}, {medDoseText}, {medScheduleText}, Allergien: {allergiesText}. Stimmt das?",
      ACK: "Perfekt. Danke.",
      REPHRASE: "Kurz bestÃ¤tigen: stimmt die Zusammenfassung?",
      REMIND_GOAL: "Letzter Schritt: einmal kurz bestÃ¤tigen.",
      HINT_STRUCTURE: "Antworten Sie: â€žJa.â€œ oder korrigieren Sie eine Sache.",
      HINT_EXAMPLE_1: "â€žJa.â€œ",
      HINT_EXAMPLE_2: "â€žFast â€“ es sind 500 mg.â€œ",
      HINT_EXAMPLE_3: "â€žNein â€“ Allergie gegen Penicillin.â€œ",
      CLOSING: "Medikamenten-Check abgeschlossen.",
    },
  },
  pfleg_vital: {
    vital_01_bp: {
      ASK: "Wie ist der Blutdruck? (z.B. 120 zu 80)",
      ACK: "Okay: {vital_bp_sys}/{vital_bp_dia}.",
      REPHRASE: "Sagen Sie bitte: systolisch/diastolisch, z.B. 120/80.",
      REMIND_GOAL: "Kurz zum Ziel: Wir brauchen den Blutdruck.",
      HINT_STRUCTURE: "Schema: â€ž{Zahl} zu {Zahl}â€œ.",
      HINT_EXAMPLE_1: "120 zu 80",
      HINT_EXAMPLE_2: "140 zu 90",
      HINT_EXAMPLE_3: "110 zu 70",
    },
    vital_02_puls: {
      ASK: "Wie ist der Puls?",
      ACK: "Notiert: {vital_pulse}.",
      REMIND_GOAL: "Kurz zum Ziel: Wir brauchen den Puls.",
      HINT_STRUCTURE: "Nennen Sie nur die Zahl.",
      HINT_EXAMPLE_1: "72",
      HINT_EXAMPLE_2: "95",
      HINT_EXAMPLE_3: "110",
    },
    vital_03_temp: {
      ASK: "Wie ist die Temperatur?",
      ACK: "Okay: {vital_temp} Â°C.",
      REMIND_GOAL: "Kurz zum Ziel: Wir brauchen die Temperatur.",
      HINT_STRUCTURE: "Nennen Sie nur die Zahl.",
      HINT_EXAMPLE_1: "36,8",
      HINT_EXAMPLE_2: "38,2",
      HINT_EXAMPLE_3: "39,0",
    },
    vital_04_spo2: {
      ASK: "Wie ist die SauerstoffsÃ¤ttigung (SpOâ‚‚)?",
      ACK: "Okay: {vital_spo2} %.",
      REMIND_GOAL: "Kurz zum Ziel: Wir brauchen die SpOâ‚‚.",
      HINT_STRUCTURE: "Nennen Sie nur die Zahl in Prozent.",
      HINT_EXAMPLE_1: "96",
    },
    vital_05_einschaetzung: {
      ASK: "Ist etwas auffÃ¤llig? (ja/nein)",
      ACK: "Verstanden: {vital_concern}.",
      REMIND_GOAL: "Kurz zum Ziel: Wir prÃ¼fen, ob Werte auffÃ¤llig sind.",
      HINT_STRUCTURE: "Antworten Sie: â€žJaâ€œ oder â€žNeinâ€œ.",
      HINT_EXAMPLE_1: "Nein.",
    },
    vital_06_closing: {
      ASK: "Zusammenfassung: BD {bp}, Puls {vital_pulse}, Temp {vital_temp}, SpOâ‚‚ {vital_spo2}. Stimmt das?",
      CLOSING: "Danke. Vitalzeichen-Check abgeschlossen.",
      REMIND_GOAL: "Letzter Schritt: kurz bestÃ¤tigen.",
      HINT_STRUCTURE: "Antworten Sie: â€žJa, stimmt.â€œ oder korrigieren Sie eine Zahl.",
      HINT_EXAMPLE_1: "â€žJa, stimmt.â€œ",
    },
  },
  pfleg_hygiene: {
    hyg_01_haende: {
      ASK: "Was machen Sie zuerst, bevor Sie den Patienten anfassen?",
      ACK: "Genau: {hygiene_action}.",
      REMIND_GOAL: "Kurz zum Ziel: Wir starten mit Hygiene.",
      HINT_STRUCTURE: "Antworten Sie mit einer Aktion.",
      HINT_EXAMPLE_1: "HÃ¤nde desinfizieren.",
    },
    hyg_02_handschuhe: {
      ASK: "Wann brauchen Sie Handschuhe?",
      ACK: "Okay: {reason_short}.",
      REMIND_GOAL: "Kurz zum Ziel: Wann Handschuhe nÃ¶tig sind.",
      HINT_STRUCTURE: "Antworten Sie kurz mit einem Grund.",
      HINT_EXAMPLE_1: "Bei KÃ¶rperflÃ¼ssigkeiten.",
      HINT_EXAMPLE_2: "Bei Wundversorgung.",
    },
    safety_03_sturz: {
      ASK: "Was sagen Sie, damit der Patient sicher aufsteht?",
      ACK: "Gut: {safety_action}.",
      REMIND_GOAL: "Kurz zum Ziel: Sturz verhindern.",
      HINT_STRUCTURE: "Antworten Sie mit einem kurzen Satz.",
      HINT_EXAMPLE_1: "Bitte warten, ich helfe Ihnen.",
      HINT_EXAMPLE_2: "Nicht alleine aufstehen.",
    },
    safety_04_lagerung: {
      ASK: "Was prÃ¼fen Sie am Bett, damit es sicher ist?",
      ACK: "Notiert: {safety_action}.",
      REMIND_GOAL: "Kurz zum Ziel: Sicherheit am Bett.",
      HINT_STRUCTURE: "Antworten Sie mit einem Stichwort.",
      HINT_EXAMPLE_1: "Klingel erreichbar.",
      HINT_EXAMPLE_2: "Bremse drin.",
    },
    hyg_05_closing: {
      CLOSING: "Perfekt. Hygiene & Sicherheit abgeschlossen.",
      REMIND_GOAL: "Wir schlieÃŸen kurz ab.",
      HINT_STRUCTURE: "Antworten Sie kurz: â€žOkay.â€œ",
      HINT_EXAMPLE_1: "Okay.",
    },
  },
  pfleg_kommunikation: {
    comm_01_empathie: {
      ASK: "Sagen Sie einen empathischen Satz.",
      ACK: "Sehr gut.",
      REMIND_GOAL: "Kurz zum Ziel: Empathie zeigen.",
      HINT_STRUCTURE: "Antworten Sie mit einem Satz.",
      HINT_EXAMPLE_1: "Ich verstehe, dass das unangenehm ist.",
    },
    comm_02_beruhigen: {
      ASK: "Wie beruhigen Sie die Situation in einem Satz?",
      ACK: "Sehr gut.",
      REMIND_GOAL: "Kurz zum Ziel: ruhig beruhigen.",
      HINT_STRUCTURE: "Antworten Sie mit einem Satz.",
      HINT_EXAMPLE_1: "Wir kÃ¼mmern uns gleich darum.",
    },
    comm_03_grenze_setzen: {
      ASK: "Wie setzen Sie ruhig eine Grenze?",
      ACK: "Sehr gut.",
      REMIND_GOAL: "Kurz zum Ziel: ruhig Grenzen setzen.",
      HINT_STRUCTURE: "Antworten Sie mit einem Satz.",
      HINT_EXAMPLE_1: "Bitte sprechen Sie leiser. Ich helfe Ihnen dann besser.",
    },
    comm_04_naechster_schritt: {
      ASK: "Was passiert als nÃ¤chstes? (kurz erklÃ¤ren)",
      ACK: "Sehr gut.",
      REMIND_GOAL: "Kurz zum Ziel: nÃ¤chster Schritt.",
      HINT_STRUCTURE: "Antworten Sie mit einem Satz.",
      HINT_EXAMPLE_1: "Ich messe jetzt die Werte und hole dann den Arzt.",
    },
    comm_05_closing: {
      CLOSING: "Perfekt. Kommunikation abgeschlossen.",
      REMIND_GOAL: "Wir schlieÃŸen kurz ab.",
      HINT_STRUCTURE: "Antworten Sie kurz: â€žOkay.â€œ",
      HINT_EXAMPLE_1: "Okay.",
    },
  },
};

export function renderTemplate(text: string, slots: Record<string, any>) {
  const replacements: Record<string, string> = {
    patientTitle: slots.patientTitle ? `${slots.patientTitle} ` : "",
    patientName: slots.patientName ?? "",
    roomNumber: slots.roomNumber ?? "",
    problemShort: slots.problemShort ?? "",
    durationText: slots.durationText ?? "",
    urgencyText: slots.urgencyText ?? "",
    painLocation: slots.painLocation ?? "",
    painScale: slots.painScale != null ? String(slots.painScale) : "",
    medName: slots.medName ?? "",
    medDoseText: slots.medDoseText ?? "",
    medScheduleText: slots.medScheduleText ?? slots.timeText ?? "",
    allergiesText: slots.allergiesText ?? "",
    vital_bp_sys: slots.vital_bp_sys ?? "",
    vital_bp_dia: slots.vital_bp_dia ?? "",
    vital_pulse: slots.vital_pulse ?? "",
    vital_temp: slots.vital_temp ?? "",
    vital_spo2: slots.vital_spo2 ?? "",
    vital_concern: slots.vital_concern ?? "",
    hygiene_action: slots.hygiene_action ?? "",
    safety_action: slots.safety_action ?? "",
    reason_short: slots.reason_short ?? "",
    bp:
      slots.vital_bp_sys && slots.vital_bp_dia
        ? `${slots.vital_bp_sys}/${slots.vital_bp_dia}`
        : "",
  };
  return text.replace(/\{(\w+)\}/g, (_match, key) => replacements[key] ?? "");
}
